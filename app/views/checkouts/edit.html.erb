<div class="row-fluid">
  <div class="span9">
    <h1 class="title"><%= t('page.editing', :model => t('activerecord.models.checkout')) -%></h1>

    <%= render 'manifestations/title', :manifestation => @checkout.item.manifestation if @checkout.item -%>

    <h3><%= t('checkout.renewal') -%></h3>
    <%- if @checkout.checkout_renewable? -%>
      <%= form_for(@checkout) do |f| -%>
        <%= t('checkout.new_due_date') -%>: <%= l(@new_due_date, :formats => :only_date) if @new_due_date -%>
        <%= f.hidden_field :due_date, :value => @new_due_date -%>
        <br />
        <%= f.submit :class => 'btn'%>
      <%- end -%>
    <%- else -%>
      <div class="field"><%= t('checkout.this_item_cant_be_renewed') -%></div>
    <%- end -%>

    <% if current_user.has_role?('Librarian') %>
      <h3><%= t('checkout.editing_due_date') -%></h3>

      <%= form_for(@checkout) do |f| -%>
        <%= f.error_messages -%>

        <div class="field">
          <%= f.label :due_date -%>
          <%= f.hidden_field :user_id -%>
          <%= f.hidden_field :item_id -%>
          <%= f.text_field :due_date, :value => @checkout.due_date.try(:strftime, "%Y-%m-%d"), :class => 'date_field', :placeholder => "#{t('page.example')}: 2011-04-12"-%>
        </div>
        <div class="field">
          <%= t('checkout.renewal_count') -%>: <%= f.text_field :checkout_renewal_count, :class => 'resource_integer' -%>
        </div>

        <div class="actions">
          <%= f.submit :class => 'btn' %>
        </div>
      <%- end -%>
    <%- end -%>
  </div>

  <div class="span3">
    <%= render 'manifestations/book_jacket', :manifestation => @checkout.item.manifestation if @checkout.item -%>
    <ul>
      <li><%= link_to t('page.show'), @checkout -%></li>
      <% if @checkout.user %>
        <li><%= link_to t('page.back'), user_checkouts_path(@checkout.user) -%></li>
      <% end %>
    </ul>
  </div>
</div>
